# 鸿蒙 RemoteCommunicationKit 网络请求简明说明&用法示例

## 约束与支持设备
- 支持设备：Phone、2in1（平板/电脑二合一）、Tablet、Wearable（可穿戴设备），
- TV设备自 v5.1.1(19) 起新增支持。

---

## fetch 请求用法

- 用于发送 HTTP 请求，可以自定义请求头、请求体等参数
- 返回值是 Promise，异步回调
- 支持远程资源、流处理、拦截请求/响应
- 推荐用于常见 HTTP 通信场景

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const url = "https://www.example.com/fetch";
const request = new rcp.Request(url, 'GET');
const session = rcp.createSession();

session.fetch(request)
  .then((rep) => {
    console.info(`Response succeeded: ${rep}`);
  })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  });
```

---

## GET 请求

- 用于从服务器获取数据
- 方法：`get(url: URLOrString, destination?: ResponseBodyDestination): Promise<Response>`

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const getURL = "http://www.example.com/get";
const session = rcp.createSession();

session.get(getURL)
  .then((response) => { console.info(`Response succeeded: ${response}`); })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  });
```

---

## POST 请求

- 常用于向服务器提交数据
- 方法：`post(url: URLOrString, content?: RequestContent, destination?: ResponseBodyDestination): Promise<Response>`

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const postURL = "https://www.example.com";
const postContent: rcp.RequestContent = {
  fields: {
    'key1': 'value1',
    'key2': 'value2',
    'key3': 'value3'
  }
};
const session = rcp.createSession();

session.post(postURL, postContent)
  .then((response) => {
    console.info(`Response succeeded: ${JSON.stringify(response.headers)}`);
    console.info(`Response succeeded: ${JSON.stringify(response.statusCode)}`);
  })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  })
```

---

## PUT 请求

- 用于更新已有资源，幂等操作
- 方法：`put(url: URLOrString, content?: RequestContent, destination?: ResponseBodyDestination): Promise<Response>`

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const putContent: rcp.RequestContent = {
  fields: { 'key1': 'value1', 'key2': 'value2', 'key3': 'value3' }
};
const session = rcp.createSession();

session.put("http://www.example.com/put", putContent)
  .then((response) => { console.info(`Response succeeded: ${response}`); })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  });
```

---

## HEAD 请求

- 快速获取资源头信息（如文件大小、修改日期）
- 方法：`head(url: URLOrString): Promise<Response>`

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const session = rcp.createSession();
session.head("http://www.example.com/head")
  .then((response) => { console.info(`Response succeeded: ${response}`); })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  });
```

---

## DELETE 请求

- 用于删除服务器上的资源
- 方法：`delete(url: URLOrString): Promise<Response>`

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const session = rcp.createSession();
session.delete("http://www.example.com/delete")
  .then((response) => { console.info(`Response succeeded: ${response}`); })
  .catch((err: BusinessError) => {
    console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`);
  });
```

---

## 简单表单数据 Form 请求

- 用于发送简单 HTTP 表单数据（content 为 Form）
- 可自定义 key 顺序（从 6.0.1(21) 开始支持）

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const form = new rcp.Form({ "key1": "value1", "key2": "value2" });
form.keys = ["key2", "key1"];

let req = new rcp.Request("http://example.com");
req.content = form;

const session = rcp.createSession();
session.fetch(req)
  .then((resp) => { console.info(`Response succeeded: ${JSON.stringify(resp)}`); session.close(); })
  .catch((err: BusinessError) => { console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`); session.close(); })
```

---

## MultipartForm 请求（多部分表单支持）

- 用于上传多部分内容（如文件+字段）
- 可自定义 key 顺序（从 6.0.1(21) 开始支持）

### 示例
```typescript
import { rcp } from '@kit.RemoteCommunicationKit';
import { BusinessError } from '@kit.BasicServicesKit';

const multiForm = new rcp.MultipartForm({
  "key1": "value1",
  "key2": "value2",
  "key3": "value3",
});
multiForm.keys = ["key3", "key1", "key2"];

let req = new rcp.Request("http://example.com");
req.content = multiForm;

const session = rcp.createSession();
session.fetch(req)
  .then((resp) => { console.info(`Response succeeded: ${JSON.stringify(resp)}`); session.close(); })
  .catch((err: BusinessError) => { console.error(`Response err: Code is ${JSON.stringify(err.code)}, message is ${JSON.stringify(err)}`); session.close(); })
```

---

**注意事项：**
- 需要在 `module.json5` 申请 `ohos.permission.INTERNET` 网络权限。
- URL和参数需根据实际业务调整。
- 错误处理要用 `catch` 块，将错误信息可打印到调试台，确保稳定性。

---

**接口具体参数说明请参考官方文档：  
RemoteCommunicationKit API Reference**